{"remainingRequest":"/home/runner/work/ccu-ccit.github.io/ccu-ccit.github.io/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/runner/work/ccu-ccit.github.io/ccu-ccit.github.io/src/components/teacher/InProgressActivity/Monitor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/runner/work/ccu-ccit.github.io/ccu-ccit.github.io/src/components/teacher/InProgressActivity/Monitor.vue","mtime":1610174192202},{"path":"/home/runner/work/ccu-ccit.github.io/ccu-ccit.github.io/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/runner/work/ccu-ccit.github.io/ccu-ccit.github.io/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/runner/work/ccu-ccit.github.io/ccu-ccit.github.io/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/runner/work/ccu-ccit.github.io/ccu-ccit.github.io/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/runner/work/ccu-ccit.github.io/ccu-ccit.github.io/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IGdldFByb2dyZXNzIH0gZnJvbSAiQC9hcGlzL3JlcSI7CmNvbnN0IHsgbWFwR2V0dGVyczogdGVhY2hlckdldHRlcnMgfSA9IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzKCJ0ZWFjaGVyIik7CmNvbnN0IHsgbWFwQWN0aW9uczogdGVhY2hlckFjdGlvbnMgfSA9IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzKCJ0ZWFjaGVyIik7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgYWN0aXZpdHk6IE9iamVjdCwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb2x1bW5zOiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICJOYW1lIiwKICAgICAgICAgIGRhdGFJbmRleDogIm5hbWUiLAogICAgICAgICAga2V5OiAibmFtZSIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgc3R1ZGVudEFuc1Byb2dyZXNzOiBbXSwKICAgICAgcG9sbGluZzogbnVsbCwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4udGVhY2hlckdldHRlcnMoWyJnZXRJblByb2dyZXNzUXVpeiIsICJnZXRTdHVkZW50QW5zUHJvZ3Jlc3MiXSksCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRJblByb2dyZXNzUXVpei5mb3JFYWNoKChxdWl6KSA9PiB7CiAgICAgIHRoaXMuY29sdW1ucy5wdXNoKHsKICAgICAgICB0aXRsZTogIlEiICsgcXVpei5zZXJpYWwsCiAgICAgICAgZGF0YUluZGV4OiBxdWl6LnNlcmlhbC50b1N0cmluZygpLAogICAgICAgIGtleTogcXVpei5zZXJpYWwsCiAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAiYW5zd2VyIiB9LAogICAgICB9KTsKICAgIH0pOwogICAgZ2V0UHJvZ3Jlc3MoeyBjb2RlbmFtZTogdGhpcy5hY3Rpdml0eS5jb2RlbmFtZSB9KS50aGVuKChyZXMpID0+IHsKICAgICAgdGhpcy5zZXRTdHVkZW50QW5zUHJvZ3Jlc3MocmVzLnN0dWRlbnQgPT09IG51bGwgPyBbXSA6IHJlcy5zdHVkZW50KTsKICAgICAgdGhpcy5zdHVkZW50QW5zUHJvZ3Jlc3MgPSB0aGlzLiRzdG9yZS5zdGF0ZS50ZWFjaGVyLnN0dWRlbnRBbnNQcm9ncmVzczsKICAgIH0pOwogICAgdGhpcy5wb2xsRGF0YSgpOwogIH0sCiAgbWV0aG9kczogewogICAgLi4udGVhY2hlckFjdGlvbnMoWyJzZXRTdHVkZW50QW5zUHJvZ3Jlc3MiXSksCiAgICBuZXh0KCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJzdW1tYXJ5IiB9KTsKICAgIH0sCiAgICBwb2xsRGF0YSgpIHsKICAgICAgdGhpcy5wb2xsaW5nID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIGdldFByb2dyZXNzKHsgY29kZW5hbWU6IHRoaXMuYWN0aXZpdHkuY29kZW5hbWUgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLnNldFN0dWRlbnRBbnNQcm9ncmVzcyhyZXMuc3R1ZGVudCA9PT0gbnVsbCA/IFtdIDogcmVzLnN0dWRlbnQpOwogICAgICAgICAgdGhpcy5zdHVkZW50QW5zUHJvZ3Jlc3MgPSB0aGlzLiRzdG9yZS5zdGF0ZS50ZWFjaGVyLnN0dWRlbnRBbnNQcm9ncmVzczsKICAgICAgICB9KTsKICAgICAgfSwgNTAwMCk7CiAgICB9LAogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb2xsaW5nKTsKICB9LAp9Owo="},{"version":3,"sources":["Monitor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Monitor.vue","sourceRoot":"src/components/teacher/InProgressActivity","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div v-if=\"studentAnsProgress.length == 0\" class=\"spin-wrapper\">\n      <a-spin size=\"large\" />\n    </div>\n    <a-table\n      v-else\n      :pagination=\"false\"\n      :columns=\"columns\"\n      :data-source=\"studentAnsProgress\"\n      style=\"background: #fafafa\"\n    >\n      <span slot=\"answer\" slot-scope=\"record\">\n        <a-icon\n          style=\"color: #1890ff\"\n          v-if=\"record == undefined\"\n          type=\"loading\"\n        />\n        <a-icon style=\"color: green\" v-else-if=\"record.bingo\" type=\"check\" />\n        <a-icon style=\"color: red\" v-else type=\"close\" />\n      </span>\n    </a-table>\n    <div class=\"action\">\n      <a-button size=\"small\" type=\"primary\" style=\"margin: 20px\" @click=\"next\"\n        >結束活動</a-button\n      >\n    </div>\n  </div>\n</template>\n<script>\nimport { createNamespacedHelpers } from \"vuex\";\nimport { getProgress } from \"@/apis/req\";\nconst { mapGetters: teacherGetters } = createNamespacedHelpers(\"teacher\");\nconst { mapActions: teacherActions } = createNamespacedHelpers(\"teacher\");\nexport default {\n  props: {\n    activity: Object,\n  },\n  data() {\n    return {\n      columns: [\n        {\n          title: \"Name\",\n          dataIndex: \"name\",\n          key: \"name\",\n        },\n      ],\n      studentAnsProgress: [],\n      polling: null,\n    };\n  },\n  computed: {\n    ...teacherGetters([\"getInProgressQuiz\", \"getStudentAnsProgress\"]),\n  },\n  created() {\n    this.getInProgressQuiz.forEach((quiz) => {\n      this.columns.push({\n        title: \"Q\" + quiz.serial,\n        dataIndex: quiz.serial.toString(),\n        key: quiz.serial,\n        scopedSlots: { customRender: \"answer\" },\n      });\n    });\n    getProgress({ codename: this.activity.codename }).then((res) => {\n      this.setStudentAnsProgress(res.student === null ? [] : res.student);\n      this.studentAnsProgress = this.$store.state.teacher.studentAnsProgress;\n    });\n    this.pollData();\n  },\n  methods: {\n    ...teacherActions([\"setStudentAnsProgress\"]),\n    next() {\n      this.$router.push({ name: \"summary\" });\n    },\n    pollData() {\n      this.polling = setInterval(() => {\n        getProgress({ codename: this.activity.codename }).then((res) => {\n          this.setStudentAnsProgress(res.student === null ? [] : res.student);\n          this.studentAnsProgress = this.$store.state.teacher.studentAnsProgress;\n        });\n      }, 5000);\n    },\n  },\n  beforeDestroy() {\n    clearInterval(this.polling);\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.wrapper {\n  width: 80%;\n  background: #000000a6;\n  border-radius: 10px;\n  margin: 20px auto;\n  padding: 10px;\n  .action {\n    width: 100%;\n    text-align: right;\n    margin-top: 10px;\n  }\n}\n.spin-wrapper {\n  min-height: 200px;\n  position: relative;\n  div {\n    position: absolute;\n    top: 50%;\n  }\n}\n</style>"]}]}